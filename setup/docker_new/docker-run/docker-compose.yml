version: '3'

services:
  nemaki-couchdb:
    image: couchdb:2.3.1
    ports:
      - 5984:5984
    environment:
      - COUCHDB_USER=admin
      - COUCHDB_PASSWORD=password
    volumes:
      - ./nemaki-couchdb/data:/opt/couchdb/data
  nemaki-ui:
    image: tomcat:9.0-alpine
    volumes:
      - ./../../../ui/target/ui.war:/usr/local/tomcat/webapps/ui.war
      - ./nemaki-ui/classes:/usr/local/shared/classes
    ports:
      - 8080:8080
  nemaki-core:
    image: tomcat:9.0-alpine
    volumes:
      - ./../../../core/target/core.war:/usr/local/tomcat/webapps/core.war
      - ./nemaki-core/classes:/usr/local/tomcat/shared/classes
    ports:
      - 8081:8080
  nemaki-solr:
    image: tomcat:9.0-alpine
    volumes:
      - ./../../../solr/target/solr.war:/usr/local/tomcat/webapps/solr.war
      - ./nemaki-solr/classes:/usr/local/tomcat/shared/classes
    ports:
      - 8082:8080